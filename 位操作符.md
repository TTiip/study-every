# 补码、反码

> 计算机中的变量存储是以二进制数字进行存储

> 负数也是使用二进制码，但是是使用的二进制补码的格式。（下面详细说）

> 计算一个数的二进制补码需要以下步骤：
>* 1.求这个数绝对值的二进制码（例如：要求-18的二进制补码，需要先求18的二进制码）
>* 2.求二进制反码，即将0替换为1，1替换为0
>* 3.得到的二进制码加1

### 例如：
```
根据这三步求得-18的二进制补码，就要先求18的二进制码，即：
0000 0000 0000 0000 0000 0000 0001 0010

然后求其二进制反码，即：
1111 1111 1111 1111 1111 1111 1110 1101

最后，二进制反码加1，即：
1111 1111 1111 1111 1111 1111 1110 1110

但是现代的规范会尽量避免展示这些逻辑，使用更简便的表达方式：

(-18).toString(2) // -10010

```

# 按位非
> 使用一个~表示,执行按位非的操作就是返回数值的反码。

```
const num1 = 25      // 二进制码(原码) 0000 0000 0000 0000 0000 0000 0001 1001
const num1 = ~num1   // 二进制码(反码) 1111 1111 1111 1111 1111 1111 1110 0110

二进制反码转化成二进制码：
                     // 二进制码(转换) 1111 1111 1111 1111 1111 1111 1110 0101
                     // 二进制码(转换) 0000 0000 0000 0000 0000 0000 0001 1010

```
最后显示的值:
$$ sum = 1*2^4  1*2^3 + 1*2^2 + 0*2^1 + 0*2^0 = 26 $$

### 因为第32为是1表示是负数，所以最终的值为-26。

### 总结：使用按位非(~) 操作符 可以简单理解为对操作数的负值减1。



# 按位与
> 使用一个（&）表示,执行按位与的操作将两个数值的每一位对齐，然后若两位都是1则为1，其余情况则为0。

```
const num1 = 25
const num2 = 3

1.先将两个数字全部转化为二进制码
25  = 0000 0000 0000 0000 0000 0000 0001 1001
3   = 0000 0000 0000 0000 0000 0000 0000 0011
--------------------------------------------
AND = 0000 0000 0000 0000 0000 0000 0000 0001

最终结果为：1*2^0 = 1

```

# 按位或
> 使用一个（|）表示,执行按位与的操作将两个数值的每一位对齐，然后若两位有一位是1则为1，其余情况则为0。

```
const num1 = 25
const num2 = 3

1.先将两个数字全部转化为二进制码
25  = 0000 0000 0000 0000 0000 0000 0001 1001
3   = 0000 0000 0000 0000 0000 0000 0000 0011
--------------------------------------------
AND = 0000 0000 0000 0000 0000 0000 0001 1011

最终结果为：1*2^4 + 1*2^3 + 1*2^1 +1*2^0 = 27

```

# 按位异或
> 使用一个（^）表示,执行按位与的操作将两个数值的每一位对齐，如果每一位的值都相等，即0 = 0或者1=1这种，则返回0，否则返回1.

```
const num1 = 25
const num2 = 3

1.先将两个数字全部转化为二进制码
25  = 0000 0000 0000 0000 0000 0000 0001 1001
3   = 0000 0000 0000 0000 0000 0000 0000 0011
--------------------------------------------
AND = 0000 0000 0000 0000 0000 0000 0001 1010

最终结果为：1*2^4 + 1*2^3 + 1*2^1 = 26

```

# 左移操作符

使用（<<）表示，这个操作符会将数值的所有位向左移动指定的位数。例如，如果将数值2（二进制码为10）向左移5位结果就是64（二进制码为 0100 0000）

```
const oldVal = 2           // 二进制码 0000 0010
const newVal = oldVal << 5 // 二进制码 0100 0000

注：移动后右侧会出现五个空位，使用0 填充

特别说明：左移操作符不会影响符号位，换句话说 -2 向左移动5位，结果是-64 而非64。

```

# 有符号的右移

使用（>>）表示，这个操作符会将数值的所有位向右移动指定的位数。并会保留符号位（即正负号标记）。

```
const oldVal = 64           // 二进制码 0100 0000
const newVal = oldVal << 5  // 二进制码 0000 0010

注：空位使用符号为的值进行填充！！！

```

# 无符号的右移

使用（>>>）表示，这个操作符会将所有的32位都向右移动。这里需要注意：
>* 对于正数来说，无符号的右移结果和有符号的结果一致，如果将64无符号右移5位，则结果为2.
>* 对于负数来说，无符号右移以0来填充，而不是与 有符号位的右移使用符号位来进行填充。所以，对于正数和负数 有符号的右移结果一致，但是无符号右移会有差异！！！！
>* 其次，无符号右移操作服会把负数的二进制码当做正数的二进制码（即二进制补码）


这里，当对-64执行吴符号右移5位的操作符之后，得到的结果是134217726.之所以这么大，是因为-64的二进制码为 1111 1111 1111 1111 1111 1111 1100 0000，而且无符号右移操作会吧这个二进制码当成正数的二进制码，换算成十进制就是4294967232。如果把这个值右移5位，结果就变成了 0000 0111 1111 1111 1111 1111 1111 1110，即为十进制的134217726。


