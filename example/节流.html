<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<body>
	<div id="content"
		style="height:150px;line-height:150px;text-align:center; color: #fff;background-color:#ccc;font-size:80px;"></div>
	<script>
		let num = 1;
		let content = document.getElementById('content');
		content.innerHTML = num;
		function count() {
			content.innerHTML = num++;
		};

		// ===========普通版本===========
		// content.onmousemove = count;


		// ===========非立即执行版本===========
		// function debounce(func, wait) {
		// 	let timeout;
		// 	return function () {
		// 		let context = this;
		// 		let args = arguments;

		// 		if (timeout) clearTimeout(timeout);

		// 		timeout = setTimeout(() => {
		// 			func.apply(context, args)
		// 		}, wait);
		// 	}
		// }


		// ===========立即执行版本===========
		// function debounce(func, wait) {
		// 	let timeout;
		// 	return function () {
		// 		let context = this;
		// 		let args = arguments;

		// 		if (timeout) clearTimeout(timeout);

		// 		let callNow = !timeout;
		// 		timeout = setTimeout(() => {
		// 			timeout = null;
		// 		}, wait)

		// 		if (callNow) func.apply(context, args)
		// 	}
		// }


		// ===========双剑合璧版===========
		/**
		 * @desc 函数防抖
		 * @param func 函数
		 * @param wait 延迟执行毫秒数
		 * @param immediate true 表立即执行，false 表非立即执行
		 */
		// function debounce(func, wait, immediate) {
		// 	let timeout;

		// 	return function () {
		// 		let context = this;
		// 		let args = arguments;

		// 		if (timeout) clearTimeout(timeout);
		// 		if (immediate) {
		// 			var callNow = !timeout;
		// 			timeout = setTimeout(() => {
		// 				timeout = null;
		// 			}, wait)
		// 			if (callNow) func.apply(context, args)
		// 		}
		// 		else {
		// 			timeout = setTimeout(function () {
		// 				func.apply(context, args)
		// 			}, wait);
		// 		}
		// 	}
		// }


		// ===========时间戳版本===========
		function throttle(func, wait) {
			let previous = 0;
			return function () {
				let now = Date.now();
				let context = this;
				let args = arguments;
				if (now - previous > wait) {
					func.apply(context, args);
					previous = now;
				}
			}
		}

		// ===========定时器版本===========
		function throttle(func, wait) {
			let timeout;
			return function () {
				let context = this;
				let args = arguments;
				if (!timeout) {
					timeout = setTimeout(() => {
						timeout = null;
						func.apply(context, args)
					}, wait)
				}
			}
		}
		// ===========双剑合璧版===========
		/**
 * @desc 函数节流
 * @param func 函数
 * @param wait 延迟执行毫秒数
 * @param type 1 表时间戳版，2 表定时器版
 */
	function throttle(func, wait ,type) {
    if(type===1){
			let previous = 0;
    }else if(type===2){
			let timeout;
    }
    return function() {
			let context = this;
			let args = arguments;
			if(type===1){
				let now = Date.now();

				if (now - previous > wait) {
					func.apply(context, args);
					previous = now;
				}
			}else if(type===2){
				if (!timeout) {
					timeout = setTimeout(() => {
						timeout = null;
						func.apply(context, args)
					}, wait)
				}
			}
    }
}

		content.onmousemove = throttle(count, 1000);
	</script>
</body>

</html>